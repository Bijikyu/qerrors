'use strict'; const localVars = require('../config/localVars'); const initializeModule = async (options = {}) => { const { module: moduleName = 'unnamed-module', version = '1.0.0', environment = localVars.NODE_ENV || 'development' } = options; try { const qerrors = require('./qerrors'); if (qerrors?.init) { qerrors.init = () => { const logger = require('./logger'); if (logger?.logInfo) { logger.logInfo(`qerrors initialized for npm module`, { module: moduleName, version: version, environment: environment }); } }; } return null; } catch (error) { return null; } }; const initializeModuleESM = async (options = {}) => { const { module: moduleName = 'unnamed-module', version = '1.0.0', environment = localVars.NODE_ENV || 'development' } = options; return import('qerrors').then((qerrors) => { if (qerrors?.init) { qerrors.init = () => { if (qerrors?.logInfo) { qerrors.logInfo(`qerrors initialized for npm module`, { module: moduleName, version: version, environment: environment }); } }; } return null; }).catch(() => null); }; const shouldInitialize = () => true; const logModuleInit = (moduleName, metadata = {}) => { try { const logger = require('./logger'); if (logger?.logInfo) { logger.logInfo(`Module initialized: ${moduleName}`, { module: moduleName, environment: localVars.NODE_ENV || 'development', ...metadata }); } } catch (error) { console.log(`Module initialized: ${moduleName}`, metadata); } }; module.exports = { initializeModule, initializeModuleESM, shouldInitialize, logModuleInit };